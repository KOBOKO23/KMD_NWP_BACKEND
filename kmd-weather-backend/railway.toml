[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt && python manage.py collectstatic --noinput"

[deploy]
startCommand = "gunicorn config.wsgi:application --bind 0.0.0.0:$PORT --workers 3 --timeout 120"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Persistent volume for GRIB files
[[volumes]]
  name = "wrf-data"
  mountPath = "/app/data"